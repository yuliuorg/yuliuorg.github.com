<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="author" content="刘昱" />
		
		<title>刘昱 | VPS重头来一遍 </title>
		
		<link rel="shortcut icon" href="/media/images/siteimg/favicon.ico">
		<link href="http://yuliu.org/feed/" rel="alternate" title="刘昱" type="application/atom+xml" />
		<link rel="stylesheet" href="/media/css/style.css" type="text/css" />
		<link rel="stylesheet" href="/media/script/prettify/prettify.css" type="text/css" />
		<script type="text/javascript" src="/media/script/prettify/prettify.js"></script> 
		<script type="text/javascript" src="/media/script/jquery-1.7.2.min.js"></script>
		<!--[if IE]>
		<script type="text/javascript" src="/media/script/html5shiv.js"></script> 
		<![endif]-->		
		<script type="text/javascript" src="/media/script/default.js"></script>
		
		<!--MathJax-->
		
		<!--Google Analytics-->
		<script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-33277878-1']);
			_gaq.push(['_setDomainName', 'yuliu.org']);
			_gaq.push(['_trackPageview']);
			_gaq.push(['_trackPageLoadTime']);
			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		</script>
		<!--Baidu Tongji-->
		<script>
			var _hmt = _hmt || [];
			(function() {
  				var hm = document.createElement("script");
  				hm.src = "//hm.baidu.com/hm.js?48a6a4d484b4cface9c1feb925c3129e";
  				var s = document.getElementsByTagName("script")[0]; 
  				s.parentNode.insertBefore(hm, s);
			})();
		</script>
		
	
	</head>
	<body>

		<div id="container">
			<header>
			<a href="http://en.wikipedia.org/wiki/Chicago_Pile-1"><img id="siteimage" src="/media/images/siteimg/Chicago_Pile.jpg" title="Chicago Pile 1" alt="Chicago Pile 1" /></a>
			<h1>刘 昱</h1>
			<h2>核能动力系统设计高级工程师</h2>
			</header>
			<nav>
			<span><a title="首页" class="" href="http://yuliu.org/">主页</a></span>
			<span><a title="简历" class="" href="http://yuliu.org/vitae/">简历</a></span>
			<span><a title="文章" class="" href="http://yuliu.org/publication/">文章</a></span>
			<span><a title="关于" class="" href="http://yuliu.org/about/">关于</a></span>
			<span><a title="留言" class="" href="http://yuliu.org/guestbook/">留言</a></span>
			<span><a title="链接" class="" href="http://yuliu.org/link/">链接</a></span>
			<span><a title="杂货铺" class="" href="http://yuliu.org/essay">杂货铺</a></span>
			</nav>
			<div id="main" role="main">
				<article class="content">
				<section class="title">
<h1>VPS重头来一遍</h1>
</section>
<section class="post">
<p>好久没有折腾VPS了，如果不是最近发现SSH功能不好使，有些地方去不了的话，也不会下决心重新折腾一下VPS。这里留个简单的记录，使VPS基本具备使用条件的步骤。</p>

<h1>前言</h1>

<p>关于VPS建站，以前写过两篇还算比较详细的东西吧，<a href="/2011/03/vps_hosting_from_zero_1/">链接一</a>，<a href="/2011/03/vps_hosting_from_zero_2/">链接二</a>。不过随着与时俱进，该升级的升级，该简化简化的简化。</p>

<h1>流水</h1>

<ol>
<li><p>vps控制面板重装系统，选择Centos 6.3 32bit</p></li>
<li><p>安装lnmp<br/>
时间过得真快，lnmp已经发展到了V1.0，不过似乎也将永远停留在1.0。<a href="http://lnmp.org/install.html">安装说明</a></p></li>
<li><p>FTP功能<br/>
通过lnmp自带的脚本，安装pureftpd。<a href="http://lnmp.org/faq/ftpserver.html">安装说明</a><br/>
注意1：如果lnmp安装过程选择的是MySQL 5.5，还得打个<a href="http://lnmp.org/faq/fix-pureftpd-bug-mysql-55.html">补丁</a><br/>
注意2：也许是centos的防火墙更新了，刚安装完pureftpd是能够使用的，但是如果重启VPS，客户端将不能连上FTP，查找了一番，这是由于系统防火墙的相关端口没有打开导致的。使用下述命令，打开iptables中的相关端口即可。</p>

<pre><code>  $ /sbin/iptables -I INPUT -p tcp --dport 21 -j ACCEPT
  $ /sbin/iptables -I INPUT -p tcp --dport 22 -j ACCEPT
  $ service iptables save
</code></pre></li>
<li><p>SSH账号<br/>
建一个不能登录界面的账号供SSH使用。</p>

<pre><code>  $ useradd username -s /sbin/nologin
  $ passwd username
</code></pre></li>
<li><p>VPN账号<br/>
原来是使用别人编的一个脚本直接开启VPN功能，但是此次发现该网页打不开了，于是重新google了一番，用pptpd建立VPN账号，主要参考了<a href="http://fengqi.me/unix/46.html">这个哥们的经验</a><br/>
就一点要注意的，上面帖子中的pptpd用的是1.3.4版本，现在已经是1.4.0版本了。32位系统可用如下地址</p>

<pre><code>  $ wget http://poptop.sourceforge.net/yum/stable/packages/pptpd-1.4.0-1.el6.i686.rpm
</code></pre></li>
<li><p>plowshare<br/>
原来写过一篇安装<a href="/2011/05/using_plowfhare_to_download_from_netdrive_on_vps/">plowshare的文章</a>，现在应该说更简化了，详见链接最后的更新。</p></li>
</ol>


<p>plowshare啥时候能支持百度云上传下载就完美了。</p>

<h1>其他</h1>

<ul>
<li><a href="http://hi.baidu.com/hanyanlovejoy/item/b2660044393659d6c1a59214">sudo的用法</a></li>
</ul>


<p>本文大量的都是应用链接，只担心这些链接在某事某刻就消失了，有啥好办法给他们做个备份呢？</p>

</section>
<section class="meta">
<span class="author">
	<a href="http://yuliu.org">刘昱</a>
</span>
<span class="time">
	/
	
	<time datetime="2014-01-28">2014-01-28</time> 更新
	
</span>
<br />

<span class="categories">
	分类： 
	
	<a href="http://yuliu.org/essay/categories.html#计算机" title="计算机">计算机</a>&nbsp;/
	
</span>


<span class="tags">
	标签： 
	
	<a href="http://yuliu.org/essay/tags.html#VPS" title="VPS">VPS</a>&nbsp;
	
	<a href="http://yuliu.org/essay/tags.html#SSH" title="SSH">SSH</a>&nbsp;
	
	<a href="http://yuliu.org/essay/tags.html#VPN" title="VPN">VPN</a>&nbsp;
	
</span>

</section>

<section class="comment">
<a href="#" id="show_disqus_comment" onclick="return false;">更多信息，请点击查看评论</a>
<div id="disqus_thread"></div>
</section>
<script type="text/javascript">
$(function(){
		$('section.comment #show_disqus_comment').on('click',function(){
			$(this).html('评论加载中<image src="/media/images/siteimg/loading.gif" class="loader-img" />');
			var disqus_shortname = 'yuliu'; // required: replace example with your forum shortname
			var disqus_url = 'http://yuliu.org/2014/01/review_of_vps_hosting_setup/';
			// var disqus_developer = 1; 
			var that = this;
			// var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			var src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			PSJS.loadScript(src, function(){$(that).remove()});
			});
		});
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



<script type="text/javascript">
	$(function(){
		$(document).keydown(function(e) {
			var url = false;
			if (e.which == 37 || e.which == 74) {  // Left arrow and J
				
				url = 'http://yuliu.org/2014/01/root_reinstall_rom_of_hongmi/';
				
			}
			else if (e.which == 39 || e.which == 75) {  // Right arrow and K
				
			}
			if (url) {
				window.location = url;
			}
		});
	})
</script>


				</article>
				<div id="toc"></div>
			</div>
		</div>
	</body>
</html>
